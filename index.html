<html>
  <head>
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" type="text/css" href="sprite.css">
    <script type="text/javascript" src="sprite.js"></script>
  </head>
  <body>

    <h1>RPGツクールMV用 スタイルシート</h1>
    <h2>使い方</h2>
    <p>まず、下記のサンプルに沿った画像ファイルを準備します。</p>
    <div><img src="img/01_11_02_img02.png"></div>
    <div><a href="https://tkool.jp/mv/course/04.html">RPGツクールMV サイドビュー用　味方キャラクター(img/sv_actors)</a></div>

    <p>ここではゆるドラシルの素材を使って試してみます。</p>
    <div><img src="img/1056010302.png"></div>
    <a href="http://yurudora.com/tkool/">ゆるドラシル RPGツクール素材提供サイト</a>

    <p>次に <a href="sprite.css">sprite.css</a> を読み込み、div 要素に CSS クラスを与えるとループアニメーションが実行されます。</p>
    <div class="js-animations-container animations-container"></div>
    <div class="js-template sprite-container">
      <div class="js-sprite"></div>
      <small class="js-text"></small>
      <code class="js-code"></code>
    </div>

    <script>
      (() => {
          const animationContainer = document.getElementsByClassName("js-animations-container")[0]
          const template = document.getElementsByClassName("js-template")[0]
          const titles = [
              "前進", "突き", "逃げる",
              "通常待機", "振り", "勝利",
              "詠唱待機", "飛び道具", "瀕死",
              "防御", "汎用スキル", "状態異常",
              "ダメージ", "魔法", "睡眠",
              "回避", "アイテム", "戦闘不能"
          ]
          titles.forEach((title, index) => {
              const x = (index % 3) + 1
              const y = Math.floor(index / 3) + 1
              const animationName = "sprite-animation" + y + "-" + x
              const newNode = template.cloneNode(true)
              newNode.classList.remove("js-template")
              const textNode = newNode.getElementsByClassName("js-text")[0]
              const codeNode = newNode.getElementsByClassName("js-code")[0]
              const spriteNode = newNode.getElementsByClassName("js-sprite")[0]
              const sprite = new Sprite(animationName, "character1")
              spriteNode.appendChild(sprite.node)
              textNode.appendChild(document.createTextNode(title))
              codeNode.appendChild(document.createTextNode(sprite.node.outerHTML))
              animationContainer.appendChild(newNode)
          })
          template.parentNode.removeChild(template)
      })()
    </script>
  </body>
</html>
